<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LABOCONNECT ‚Äî Municipality of Labo, Camarines Norte</title>
  <meta name="description" content="Investment opportunities in Labo ‚Äî streamlined permits, growing community, BPLO support." />
  <link rel="icon" type="image/png" href="/assets/img/Labo-Logo.png" />

  <!-- GLOBAL + PAGE CSS -->
<link rel="stylesheet" href="../css/global.css">
<link rel="stylesheet" href="../css/home.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    /* submit section animation and CTA */
    .submit-wrap { opacity: 0; transform: translateY(6px); transition: opacity 260ms ease, transform 260ms ease; }
    .submit-wrap.visible { opacity: 1; transform: translateY(0); }
    .submit-cta { padding:18px; border-radius:8px; background:#fff; box-shadow:0 6px 20px rgba(2,6,23,0.04); text-align:center }
    .submit-cta .btn { margin-top:8px }
  </style>

</head>

<body>

<!-- HEADER -->
<div id="header-import"></div>

<!-- CONTENT -->
  <!-- MAIN -->
  <main class="wrap" style="margin:0 auto; max-width:var(--container);">

    <!-- HERO -->
    <section class="hero reveal" id="hero">
      <div class="hero-left">
        <span class="kicker">Labo, Camarines Norte</span>
        <h1>WELCOME to LaboConnect!</h1>
        <p class="lead">Looking for the perfect place to grow your business? You‚Äôve found it! Labo is rapidly emerging as a premier investment destination with growing commercial establishments, booming tourism, and a business-friendly government that‚Äôs here to support your success every step of the way.</p>

        <div class="cta-row">
          <button class="btn btn-primary" onclick="scrollToSection('#opportunities')">Explore Opportunities</button>
          <button class="btn btn-ghost" onclick="downloadGuide()">Download Investment Guide</button>
        </div>

        <div style="display:flex;gap:12px;margin-top:12px">
          <div style="display:flex;gap:8px;align-items:center"><div style="width:10px;height:10px;border-radius:50%;background:var(--accent)"></div><div class="small muted">Streamlined Permits</div></div>
          <div style="display:flex;gap:8px;align-items:center"><div style="width:10px;height:10px;border-radius:50%;background:var(--accent-2)"></div><div class="small muted">Thriving Community</div></div>
          <div style="display:flex;gap:8px;align-items:center"><div style="width:10px;height:10px;border-radius:50%;background:var(--accent)"></div><div class="small muted">Growing Community</div></div>
        </div>
      </div>

      <aside class="hero-right">
        <figure class="hero-image" aria-hidden="false">
          <img src="/assets/img/Labo.png" alt="Labo ‚Äî Investment image (replace hero.jpg with the original image file)" onerror="this.style.display='block'; this.parentElement.style.background='linear-gradient(180deg,#eafbf0,#dff7e9)';">
        </figure>

        <div class="stat">
          <div>
            <div class="small muted">Growing Business Hub</div>
            <div style="font-weight:800;color:var(--accent)">900+ businesses</div>
          </div>
          <div class="small muted">Join now</div>
        </div>

        <div class="stat">
          <div>
            <div class="small muted">Fast BPLO Response</div>
            <div style="font-weight:800;color:var(--accent)">Initial in 24 hrs</div>
          </div>
          <div class="small muted">Free consult</div>
        </div>
      </aside>
    </section>

    <!-- WHY Lab0 -->
    <section id="why" class="reveal why-section">
      <div class="why-top">
        <h1 class="section-title">Why Choose Labo for your Business?</h1>
        <div class="kicker-pill">YOUR SUCCESS STORY STARTS HERE</div>
        <p class="lead">Thinking about expanding or starting a new business? Labo, Camarines Norte offers everything you need to succeed ‚Äî from strategic location to supportive community and growing economy.</p>
      </div>

      <div class="why-grid" aria-hidden="false">
        <article class="why-card" style="background-image:url('/assets/img/WhyLabo/strategic.png')">
          <div class="card-overlay">
            <div class="card-title">Strategic Location</div>
            <p class="muted card-desc">Labo sits at the heart of Camarines Norte, offering excellent connectivity to major cities and ports.</p>
          </div>
        </article>

        <article class="why-card" style="background-image:url('/assets/img/WhyLabo/market.png')">
          <div class="card-overlay">
            <div class="card-title">Growing Population & Market</div>
            <p class="muted card-desc">A steadily growing population and increasing purchasing power mean more customers for your business.</p>
          </div>
        </article>

        <article class="why-card" style="background-image:url('/assets/img/WhyLabo/friendly.png')">
          <div class="card-overlay">
            <div class="card-title">Business‚ÄëFriendly Environment</div>
            <p class="muted card-desc">Our streamlined BPLO system and supportive local government make starting a business hassle‚Äëfree.</p>
          </div>
        </article>

        <article class="why-card" style="background-image:url('/assets/img/WhyLabo/tourism.png')">
          <div class="card-overlay">
            <div class="card-title">Tourism & Economic Growth</div>
            <p class="muted card-desc">Labo's growing tourism sector creates opportunities across hospitality, retail, and services.</p>
          </div>
        </article>
      </div>

      <div class="why-callout">
        <h3>Still Exploring your options? That's smart business!</h3>
        <p class="muted">Every successful business owner did their research. We're offering more than a location ‚Äî we're offering a partnership for growth.</p>
        <div class="callout-actions">
          <button class="btn btn-primary" onclick="scrollToSection && scrollToSection('#contact')">Contact BPLO Now</button>
          <button class="btn btn-ghost" onclick="downloadGuide()">Download Investment Guide</button>
        </div>
        <div class="callout-note">Did You Know? Labo has seen a XX increase in new business registrations in the past two years!</div>
      </div>
    </section>

    <section id="opportunities" class="reveal">
      <div style="text-align:center;margin-bottom:30px;">
        <h2 class="section-title">Investment Opportunities in Labo</h2>
        <p class="lead" style="color:var(--accent);font-weight:700;margin-bottom:12px;">Where Will You Make Your Mark?</p>
        <p class="lead">From tourism and hospitality to manufacturing and technology, Labo offers diverse investment opportunities across multiple thriving sectors. Find the perfect fit for your business vision.</p>
      </div>

      <div class="grid" style="margin-top:12px" id="opportunitiesGrid">
        
      </div>

      <div style="text-align:center;margin-top:18px">
        <button class="btn btn-primary" id="viewMoreBtn" onclick="location.href='/components/listings.html'">View More Opportunities</button>
      </div>
    </section>

<section id="submitListing" class="reveal" style="margin-top:18px;margin-bottom:40px;display:none;">
      <div style="text-align:center;margin-bottom:20px;">
        <h2 class="section-title">Submit Property Listing</h2>
        <p class="lead" style="max-width:800px;margin:0 auto;">Share your property with potential investors. Fill out the form below and our team will review your listing.</p>
      </div>

      <div style="margin-top:0; max-width: 900px; margin-left: auto; margin-right: auto;">
        <div id="submitFormWrap" class="submit-wrap">
        <div class="contact-form-card">
          <div class="form-card-inner">

            <form id="listingForm" enctype="multipart/form-data" aria-label="Property Listing Form" style="display:grid;grid-template-columns:1fr 1fr;gap:20px;">
              
              <!-- LEFT COLUMN: Property Details -->
              <div style="display:flex;flex-direction:column;gap:12px;">
                <div class="field"><label for="owner_name">Owner Name *</label><input id="owner_name" type="text" name="owner_name" placeholder="Full name of property owner" required></div>

                <div class="field"><label for="title">Property Title *</label><input id="title" type="text" name="title" placeholder="e.g., Commercial Lot in Downtown Labo" required></div>

                <div class="form-row" style="display:flex;gap:12px;">
                  <div class="field" style="flex:1;"><label for="type">Property Type *</label><select id="type" name="type" required><option value="">-- Select --</option><option value="For Lease">For Lease</option><option value="For Sale">For Sale</option><option value="For Rent">Property For Rent</option></select></div>
                  <div class="field" style="flex:1;"><label for="price">Price *</label><input id="price" type="number" name="price" step="0.01" required placeholder="e.g., 1000000"></div>
                </div>

                <div class="form-row" style="display:flex;gap:12px;">
                  <div class="field" style="flex:1;"><label for="size_sqm">Size (Square Meters)</label><input id="size_sqm" type="number" name="size_sqm" step="0.01" placeholder="e.g., 500"></div>
                </div>

                <div class="form-row" style="display:flex;gap:12px;">
                  <div class="field" style="flex:1;"><label for="latitude">Latitude (optional)</label><input id="latitude" type="number" name="latitude" step="0.00000001" placeholder="14.117507"></div>
                  <div class="field" style="flex:1;"><label for="longitude">Longitude (optional)</label><input id="longitude" type="number" name="longitude" step="0.00000001" placeholder="122.350692"></div>
                </div>

                <button type="button" id="selectLocationBtn" class="btn btn-secondary" style="width: 100%;">üìç Select Location on Map</button>

                <div class="field"><label for="description">Description *</label><textarea id="description" name="description" rows="4" placeholder="Describe the property details, location, amenities, etc." required></textarea></div>
              </div>

              <!-- RIGHT COLUMN: File Uploads -->
              <div style="display:flex;flex-direction:column;gap:12px;">
                <div class="field"><label for="image">Property Image</label><input id="image" type="file" name="image" accept="image/*"></div>

                <div class="field"><label for="oct_tct">OCT or TCT *</label><input id="oct_tct" type="file" name="oct_tct" accept=".pdf,.jpg,.jpeg,.png" required></div>

                <div class="field"><label for="tax_declaration">Tax Declaration *</label><input id="tax_declaration" type="file" name="tax_declaration" accept=".pdf,.jpg,.jpeg,.png" required></div>

                <div class="field"><label for="doas">Deed of Absolute Sale *</label><input id="doas" type="file" name="doas" accept=".pdf,.jpg,.jpeg,.png" required></div>

                <div class="field"><label for="government_id">Valid Government ID of Seller *</label><input id="government_id" type="file" name="government_id" accept=".pdf,.jpg,.jpeg,.png" required></div>

                <div style="margin-top:auto;padding-top:12px;">
                  <div class="small muted" style="margin-bottom:12px;">* Required fields</div>
                  <div style="display:flex;gap:12px;">
                    <button class="btn btn-primary" type="submit">Submit Listing</button>
                    <button type="button" class="btn btn-ghost" onclick="document.getElementById('listingForm').reset()">Reset</button>
                  </div>
                </div>
              </div>
            </form>

            <p id="listingMessage" style="text-align: center; font-weight: bold; margin-top: 10px;"></p>
          </div>
        </div>
        </div>

        <div id="submitCTA" class="submit-cta" style="display:none;">
          <div id="submitCTAText">Please log in to submit a listing.</div>
          <div style="margin-top:12px">
            <button class="btn btn-primary" id="submitCTALogin">Log in / Sign up</button>
            <button class="btn btn-ghost" id="submitCTAProfile" style="display:none">Go to Profile</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PROCESS -->
    <section id="process" class="reveal process-section">
      <div class="process-grid">
        <div class="process-left">
          <h2 class="section-title">Starting Your Business in Labo</h2>
          <p class="lead">Your roadmap to success. Follow these four simple steps to establish your business in our thriving municipality.</p>

          <div class="process-steps">
            
            <div class="step">
              <div class="step-index">01</div>
              <div class="step-body">
                <div class="step-title">Explore Opportunities</div>
                <div class="muted step-desc">
                  Browse our database of commercial real estate and ventures to match your vision. Find the perfect spot for your business in Labo.
                </div>
                <button class="btn btn-primary btn-sm" onclick="scrollToSection && scrollToSection('#opportunities')" style="margin-top:10px;">View Listings</button>
              </div>
            </div>

            <div class="step">
              <div class="step-index">02</div>
              <div class="step-body">
                <div class="step-title">Secure Clearances</div>
                <div class="muted step-desc">
                  Before applying, coordinate with these local offices to get necessary permits:
                  <ul style="margin-top:8px; padding-left:20px; list-style-type:disc;">
                    <li><strong>Engineering Office</strong> (Occupancy Permit)</li>
                    <li><strong>MPDO</strong> (Zoning Clearance)</li>
                    <li><strong>BFP</strong> (Fire Safety)</li>
                    <li><strong>MHO</strong> (Sanitary Permit)</li>
                    <li><strong>MENRO</strong> (Environment Certificate)</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-index">03</div>
              <div class="step-body">
                <div class="step-title">Prepare Documents</div>
                <div class="muted step-desc">
                  Gather the requirements for your application type:
                  <ul style="margin-top:8px; padding-left:20px; list-style-type:disc;">
                    <li style="margin-bottom:6px;">
                      <strong style="color:var(--accent)">New Business:</strong><br>
                      Application Form, DTI/SEC Reg, CTC, & CCTV Photo (if capital > 1M).
                    </li>
                    <li>
                      <strong style="color:var(--accent)">Renewal:</strong><br>
                      Financial Docs (BIR/Gross Receipts), Previous Permit, CTC, & CCTV Photo (if capital > 1M).
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-index">04</div>
              <div class="step-body">
                <div class="step-title">Register & Launch</div>
                <div class="muted step-desc">
                  Submit your application via our Online Portal or visit the Business One Stop Shop (BOSS).
                  <div style="margin-top:10px; display:flex; flex-direction:column; gap:6px;">
                    
                    <a href="https://prod.ebpls.com/labocamarinesnorte/index.php/login" target="_blank" class="btn btn-ghost btn-sm" style="text-align:left; padding-left:0;">
                      üîó <strong>Online:</strong> Click here to apply 
                    </a>

                    <div style="font-size:0.95em;">
                      üèõÔ∏è <strong>Walk-In:</strong> Municipal Hall<br>
                      <span style="font-size:0.85em; opacity:0.8; margin-left:24px;">(Jan 2 - Jan 20, 2025)</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!--<div class="process-right">
          <div class="process-visual">
            <div class="cta-card" role="note" aria-label="Call to action">
              <div style="font-weight:800;font-size:18px">Need Assistance?</div>
              <div class="muted" style="margin-top:8px">Our BPLO team is ready to guide you through every step of the process.</div>
              <div style="margin-top:12px">
                <button class="btn btn-primary" onclick="scrollToSection && scrollToSection('#contact')">Contact BPLO Today</button>
              </div>
            </div>
          </div>-->
        </div>
      </div>
    </section>

    <!-- Success Stories -->
    <section id="stories" class="reveal">
      <h2 class="section-title">Success Stories from Labo</h2>
      <p class="lead">Real businesses, real growth. Click a card to learn more about each success story or ongoing project.</p>

      <div class="stories-grid" id="stories-established">
        
        <article class="story-card" tabindex="0" data-id="lcc">
          <div class="card-media" style="background-image:url('/assets/img/success/lcc.png')"></div>
          <div class="card-caption">
            <div class="card-title">LCC</div>
            <div class="card-sub">Supermarket ‚Äî Maharlika Highway, Pinya, LCN</div>
          </div>
        </article>

        <article class="story-card" tabindex="0" data-id="jfm">
          <div class="card-media" style="background-image:url('/assets/img/success/j&f.png')"></div>
          <div class="card-caption">
            <div class="card-title">J&F MALL</div>
            <div class="card-sub">Mall ‚Äî Dalas, LCN</div>
          </div>
        </article>

        <article class="story-card" tabindex="0" data-id="mrdiy">
          <div class="card-media" style="background-image:url('/assets/img/success/diy.png')"></div>
          <div class="card-caption">
            <div class="card-title">Mr. DIY</div>
            <div class="card-sub">Hardware & Retail ‚Äî Maharlika Highway, Kalamunding, LCN</div>
          </div>
        </article>

        <article class="story-card" tabindex="0" data-id="maria">
          <div class="card-media" style="background-image:url('/assets/img/success/fatima.png')"></div>
          <div class="card-caption">
            <div class="card-title">Maria Fatima</div>
            <div class="card-sub">Farm Resort ‚Äî Purok 2, Bautista, LCN</div>
          </div>
        </article>

        <article class="story-card" tabindex="0" data-id="villa">
          <div class="card-media" style="background-image:url('/assets/img/success/vila.png')"></div>
          <div class="card-caption">
            <div class="card-title">Villa Asuncion</div>
            <div class="card-sub">Resort ‚Äî San Antonio, LCN</div>
          </div>
        </article>

        <article class="story-card" tabindex="0" data-id="hutspot">
          <div class="card-media" style="background-image:url('/assets/img/success/hutspot.png')"></div>
          <div class="card-caption">
            <div class="card-title">HutSpot</div>
            <div class="card-sub">Hotel & Restaurant ‚Äî Tulay na Lipa, LCN</div>
          </div>
        </article>

      </div>
    </section>

    <!-- Story detail modal (hidden until opened) -->
    <div id="storyModal" class="story-modal" aria-hidden="true" role="dialog" aria-labelledby="storyModalTitle">
  <div class="story-modal-backdrop" data-close="true"></div>
  <div class="story-modal-panel" role="document">
    <button class="modal-close" aria-label="Close story" title="Close">‚úï</button>
    
    <div class="story-modal-media-wrapper">
      <img id="modalImage" src="" alt="" class="story-modal-media" />
    </div>
    
    <div class="story-modal-body">
      <h3 id="storyModalTitle"></h3>
      <div class="muted" id="storyModalSub"></div>
      <p id="storyModalDesc"></p>
      <div class="story-modal-actions">
        <button id="modalContact" class="btn btn-primary">Contact Business</button>
        <button id="modalMore" class="btn btn-ghost">View More</button>
      </div>
    </div>
  </div>
</div>


    <!-- Contact / Form -->
    <section id="contact" class="reveal contact-section">
      <h2 class="section-title">Ready to Start Your Investment Journey?</h2>
      <p class="lead">Let's talk about your vision. Tell us about your investment goals and we'll connect you with the perfect opportunities in Labo.</p>

      <div class="contact-grid" style="margin-top:18px">
        <div class="contact-form-card">
          <div class="form-card-inner">
            <h3 style="margin:0 0 8px 0">Get Started Today</h3>
            <p class="muted" style="margin:0 0 14px 0">Fill out this quick form and our team will prepare a customized investment package just for you.</p>

            <form id="inquiryForm" onsubmit="handleSubmit(event)" aria-label="Investment Inquiry Form">
              <div class="form-row">
                <div class="field"><label for="fullname">Full Name *</label><input id="fullname" name="fullname" required placeholder="Your Full Name" autocomplete="name"></div>
                <div class="field"><label for="email">Email Address *</label><input id="email" name="email" type="email" required placeholder="you@example.com" autocomplete="email"></div>
              </div>

              <div class="form-row">
                <div class="field"><label for="phone">Phone Number</label><input id="phone" name="phone" placeholder="+63 000 000 0000" autocomplete="tel"></div>
                <div class="field"><label for="company">Company/Organization</label><input id="company" name="company" placeholder="Your Company Name (Optional)"></div>
              </div>

              <div class="form-row">
                <div class="field"><label for="range">Investment Range</label><select id="range" name="range"><option value="">Select Investment Range</option><option>Under ‚Ç±500k</option><option>‚Ç±500k - ‚Ç±2M</option><option>‚Ç±2M - ‚Ç±10M</option><option>Above ‚Ç±10M</option></select></div>
                <div class="field"><label for="sector">Sector of Interest</label><select id="sector" name="sector"><option value="">Select Sector</option><option>Tourism & Hospitality</option><option>Retail</option><option>Manufacturing</option><option>Agriculture</option><option>Technology</option></select></div>
              </div>

              <div class="field"><label for="message">What are your goals? *</label><textarea id="message" name="message" rows="5" placeholder="What type of business are you interested in? Any specific questions about investing in Labo?" required></textarea></div>

              <div style="display:flex;gap:12px;margin-top:12px;align-items:center">
                <button class="btn btn-primary" type="submit">Send My inquiry to BPLO</button>
                <button type="button" class="btn btn-ghost" onclick="resetForm()">Reset</button>
                <div class="small muted" style="margin-left:auto">* Required fields. We respect your privacy.</div>
              </div>
            </form>
          </div>
        </div>

        <div class="contact-side">
          <div class="side-card">
            <h4 style="margin:0 0 8px 0">Contact BPLO Directly</h4>
            <div class="muted small" style="margin-bottom:8px"><strong>Phone</strong> <br> +63 000 000 0000 <br><small>Monday - Friday, 8AM - 5PM</small></div>
            <div class="muted small" style="margin-bottom:8px"><strong>Email</strong> <br> bplo@labo.gov.ph <br><small>We respond within 24 hours</small></div>
            <div class="muted small"><strong>Visit</strong> <br> Municipal Building, Labo, Camarines Norte</div>
          </div>

          <div class="side-card quick-card">
            <h4 style="margin:0 0 8px 0">Quick Response</h4>
            <ul style="padding-left:18px;margin:0;color:var(--muted)">
              <li>Initial response within 24 hours</li>
              <li>Detailed investment package within 3 days</li>
              <li>Free consultation call scheduling</li>
              <li>Personalized support throughout the process</li>
            </ul>
            <div class="tip">Tip: The more details you provide, the better we can tailor our response to your needs.</div>
          </div>
        </div>
      </div>
    </section>
    
    <!-- FAQ -->
    <section id="faq" class="reveal">
      <h2 class="section-title">Questions About Investing in Labo? We Have Answers</h2>
      <p class="lead">Common questions from potential investors ‚Äî answered honestly and clearly.</p>

      <div class="accordion" style="margin-top:12px">
        <div class="faq-item">
      <div class="accordion" style="margin-top:12px">
        <div class="faq-item">
          <button class="faq-question">How do I start a business in Labo?</button>
          <div class="faq-answer">Visit the BPLO office or fill out our online inquiry form. Our team will guide you through every step, from registration to operation.</div>
        </div>
        <div class="faq-item">
          <button class="faq-question">What support does the local government provide?</button>
          <div class="faq-answer">We offer streamlined permits, free consultations, and ongoing support for new and existing businesses.</div>
        </div>
        <div class="faq-item">
          <button class="faq-question">Are there incentives for new investors?</button>
          <div class="faq-answer">Yes! Ask our BPLO team about tax breaks, priority processing, and other incentives for qualified investments.</div>
        </div>
      </div>
    </section> <!-- end FAQ -->

    <!-- FAQ - Followup CTAs -->
    <section id="faq-cta" class="reveal" style="margin-top:18px; display:flex; flex-direction:column; align-items:center;">
      <div class="faq-cta-grid" style="display:flex; justify-content:center; gap:20px; width:100%; max-width:980px;">
        
        <div class="faq-cta-card" style="flex:1; min-width:260px; max-width:460px; text-align:center; display:flex; flex-direction:column; align-items:center;">
          <div class="cta-icon" style="font-size: 2rem; margin-bottom: 10px;">‚ùì</div> <h4 style="margin-bottom: 8px;">Still Have Questions?</h4>
          <p class="muted">We love questions! The more you understand about doing business in Labo, the more confident you'll feel about your investment decision.</p>
          <div class="cta-actions" style="margin-top: auto; padding-top: 15px;">
            <button class="btn btn-primary" onclick="scrollToSection && scrollToSection('#contact')">Contact BPLO Team</button>
          </div>
        </div>

        <div class="faq-cta-card" style="flex:1; min-width:260px; max-width:460px; text-align:center; display:flex; flex-direction:column; align-items:center;">
          <div class="cta-icon" style="font-size: 2rem; margin-bottom: 10px;">üöÄ</div> <h4 style="margin-bottom: 8px;">Ready to Start?</h4>
          <p class="muted">Hundreds of businesses have already chosen Labo. Your success story could be next ‚Äî let's make it happen!</p>
          <div class="cta-actions" style="margin-top: auto; padding-top: 15px;">
            <button class="btn btn-ghost" onclick="scrollToSection && scrollToSection('#process')">Start Your Business in Labo</button>
          </div>
        </div>
      </div>

      <div class="final-thought" style="max-width:880px; text-align:center; margin-top:24px;">
        <h3>One Final Thought...</h3>
        <p class="muted">The best business opportunities are often found in emerging markets before they become obvious to everyone else. Labo is at that perfect sweet spot right now ‚Äî growing rapidly but still accessible. Your future success story starts with taking action today.</p>
      </div>
    </section>

    <!-- HERO SECTION -->
    <section style="
      position: relative;
      height: 420px;
      background: url('/assets/img/bplo.png') center / cover no-repeat;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: white;
      border-radius: 20px;
      overflow: hidden;
    ">

      <!-- Dark overlay -->
      <div style="
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
        z-index: 1;
      "></div>

      <!-- Text content -->
      <div style="
        position: relative;
        z-index: 2;
        max-width: 780px;
        padding: 0 20px;
        margin: 0 auto;
      ">
        <h1 style="
          font-size: 42px;
          margin-bottom: 15px;
          line-height: 1.2;
          font-weight: 800;
        ">
          Your Business Success<br>Starts in Labo
        </h1>

        <p style="
          font-size: 16px;
          line-height: 1.7;
          opacity: 0.95;
        ">
          You've seen the opportunities, learned about our streamlined processes,
          and heard from successful businesses already thriving here. Now it's time
          to make Labo the home of your next business venture.
        </p>
      </div>
    </section>

    <section style="
      max-width: 1100px;
      margin: -70px auto 0;
      padding: 0 20px 20px;
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
      position: relative;
      z-index: 3;
    ">

      <div style="
        background: linear-gradient(to right, #F7FFF4, #CAE8C1);
        border-radius: 20px;
        padding: 30px 25px;
        width: 100%;
        max-width: 320px;
        text-align: center;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        border-bottom: 4px solid #10b981;
      ">
        <div style="
          width: 60px;
          height: 60px;
          background: #ffffff;
          color: #10b981;
          border-radius: 50%;
          margin: 0 auto 15px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
        ">‚ö°</div>
        <h3 style="margin-bottom: 10px; color: #1f2937;">Quick Response</h3>
        <p style="font-size: 14px; line-height: 1.6; color: #6b7280;">
          Our BPLO team responds to inquiries within 24 hours.
          Start your business journey with just one message.
        </p>
      </div>

      <div style="
        background: linear-gradient(to right, #F7FFF4, #CAE8C1);
        border-radius: 20px;
        padding: 30px 25px;
        width: 100%;
        max-width: 320px;
        text-align: center;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        border-bottom: 4px solid #10b981;
      ">
        <div style="
          width: 60px;
          height: 60px;
          background: #ffffff;
          color: #10b981;
          border-radius: 50%;
          margin: 0 auto 15px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
        ">üëê</div>
        <h3 style="margin-bottom: 10px; color: #1f2937;">No Obligations</h3>
        <p style="font-size: 14px; line-height: 1.6; color: #6b7280;">
          Explore opportunities with no pressure. We're here to provide information
          and support your decision-making.
        </p>
      </div>

      <div style="
        background: linear-gradient(to right, #F7FFF4, #CAE8C1);
        border-radius: 20px;
        padding: 30px 25px;
        width: 100%;
        max-width: 320px;
        text-align: center;
        box-shadow: 0 15px 40px rgba(0,0,0,0.08);
        border-bottom: 4px solid #10b981;
      ">
        <div style="
          width: 60px;
          height: 60px;
          background: #ffffff;
          color: #10b981;
          border-radius: 50%;
          margin: 0 auto 15px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
        ">üõ°Ô∏è</div>
        <h3 style="margin-bottom: 10px; color: #1f2937;">Complete Support</h3>
        <p style="font-size: 14px; line-height: 1.6; color: #6b7280;">
          From permits to grand opening, our team supports you every step of the way.
        </p>
      </div>

    </section>
  </main>

<div id="footer-placeholder"></div>

<script>
  (async () => {
    try {
      const resp = await fetch("../components/footer.html");
      if (!resp.ok) throw new Error(`Failed to load footer (status ${resp.status})`);
      document.getElementById("footer-placeholder").innerHTML = await resp.text();
    } catch (err) {
      console.error("Could not load footer:", err);
      document.getElementById("footer-placeholder").innerHTML =
        '<footer style="padding:20px;text-align:center;color:var(--muted)">¬© Municipality of Labo ‚Äî Footer not loaded</footer>';
    }
  })();

const listingForm = document.getElementById("listingForm");
const listingMessage = document.getElementById("listingMessage");
const submitListingSection = document.getElementById("submitListing");

// Check if user is logged in and show/hide submit listing section and CTA
async function checkUserLoginStatus() {
  try {
    const res = await fetch('/api/session', { credentials: 'same-origin' });
    if (!res.ok) throw new Error('Session fetch failed');
    const data = await res.json();

    const submitFormWrap = document.getElementById('submitFormWrap');
    const submitCTA = document.getElementById('submitCTA');
    if (!submitFormWrap || !submitCTA) return;

    // authorized roles
    const allowed = data && data.authenticated && data.user && (data.user.role === 'business' || data.user.role === 'admin');
    if (allowed) {
      // show form with animation
      submitCTA.style.display = 'none';
      submitFormWrap.classList.add('visible');
      submitListingSection.style.display = 'block';
    } else if (data && data.authenticated) {
      // logged in but not allowed role
      submitFormWrap.classList.remove('visible');
      submitListingSection.style.display = 'block';
      submitCTA.style.display = '';
      document.getElementById('submitCTAText').textContent = 'Only Business accounts may submit listings. Create or switch to a Business account.';
      document.getElementById('submitCTALogin').style.display = 'none';
      document.getElementById('submitCTAProfile').style.display = '';
    } else {
      // guest
      submitFormWrap.classList.remove('visible');
      submitListingSection.style.display = 'block';
      submitCTA.style.display = '';
      document.getElementById('submitCTAText').textContent = 'Please log in to submit a listing.';
      document.getElementById('submitCTALogin').style.display = '';
      document.getElementById('submitCTAProfile').style.display = 'none';
    }
  } catch (e) {
    // fallback to hiding section when error
    submitListingSection.style.display = 'none';
    console.warn('checkUserLoginStatus failed', e);
  }
}

// Check on page load
document.addEventListener('DOMContentLoaded', checkUserLoginStatus);
// Also check when storage changes (logout in another tab)
window.addEventListener('storage', (ev) => {
  if (ev.key === 'laboCurrentUser') checkUserLoginStatus();
});

// Wire CTA buttons
document.addEventListener('DOMContentLoaded', () => {
  const loginBtn = document.getElementById('submitCTALogin');
  const profileBtn = document.getElementById('submitCTAProfile');
  if (loginBtn) loginBtn.addEventListener('click', (e) => { e.preventDefault(); if (typeof openGuest === 'function') openGuest(); });
  if (profileBtn) profileBtn.addEventListener('click', (e) => { e.preventDefault(); window.location.href = '/components/business/index.html'; });
});

// ===============================================
// LOCATION PICKER MODAL FUNCTIONALITY
// ===============================================
let locationPickerMap = null;
let locationPickerMarker = null;
let selectedCoordinates = null;

function initializeLocationPickerMap() {
  const mapContainer = document.getElementById('locationPickerMap');
  
  // Remove old map instance if exists
  if (locationPickerMap) {
    locationPickerMap.remove();
  }

  // Create new map instance
  locationPickerMap = L.map('locationPickerMap').setView([14.153887, 122.828522], 13);

  // Add OpenStreetMap tiles
  L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(locationPickerMap);

  // Handle map clicks to place marker
  locationPickerMap.on('click', function(e) {
    const lat = e.latlng.lat;
    const lng = e.latlng.lng;

    // Store selected coordinates
    selectedCoordinates = { lat, lng };

    // Remove old marker if exists
    if (locationPickerMarker) {
      locationPickerMap.removeLayer(locationPickerMarker);
    }

    // Create popup with coordinates
    const popupContent = `<div style="text-align: center;">
      <strong>Selected Location</strong>
      <p style="margin: 5px 0; font-size: 0.85rem; color: #666;">
        ${lat.toFixed(6)}<br/>${lng.toFixed(6)}
      </p>
    </div>`;

    // Add new marker
    locationPickerMarker = L.marker([lat, lng])
      .bindPopup(popupContent)
      .addTo(locationPickerMap)
      .openPopup();

    // Enable confirm button
    document.getElementById('confirmLocationBtn').disabled = false;
  });

  // Trigger map resize after initialization
  setTimeout(() => {
    locationPickerMap.invalidateSize();
  }, 100);
}

// Attach event listeners when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  // Open location picker modal
  const selectBtn = document.getElementById('selectLocationBtn');
  if (selectBtn) {
    selectBtn.addEventListener('click', (e) => {
      e.preventDefault();
      console.log('Select location button clicked');
      const modal = document.getElementById('locationPickerModal');
      modal.style.display = 'flex';
      
      // Initialize map when modal opens
      setTimeout(() => {
        initializeLocationPickerMap();
      }, 100);
    });
  } else {
    console.warn('selectLocationBtn not found');
  }

  // Close modal - X button
  const closeBtn = document.getElementById('closeLocationModal');
  if (closeBtn) {
    closeBtn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      console.log('Close button clicked');
      document.getElementById('locationPickerModal').style.display = 'none';
      selectedCoordinates = null;
      document.getElementById('confirmLocationBtn').disabled = true;
    });
  }

  // Close modal - Cancel button
  const cancelBtn = document.getElementById('cancelLocationBtn');
  if (cancelBtn) {
    cancelBtn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      console.log('Cancel button clicked');
      document.getElementById('locationPickerModal').style.display = 'none';
      selectedCoordinates = null;
      document.getElementById('confirmLocationBtn').disabled = true;
    });
  }

  // Confirm location selection
  const confirmBtn = document.getElementById('confirmLocationBtn');
  if (confirmBtn) {
    confirmBtn.addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      console.log('Confirm button clicked', selectedCoordinates);
      if (selectedCoordinates) {
        document.getElementById('latitude').value = selectedCoordinates.lat.toFixed(8);
        document.getElementById('longitude').value = selectedCoordinates.lng.toFixed(8);
        document.getElementById('locationPickerModal').style.display = 'none';
        selectedCoordinates = null;
        document.getElementById('confirmLocationBtn').disabled = true;
      }
    });
  }
});

listingForm.addEventListener("submit", async (e) => {
  e.preventDefault();
  // Verify server session before submitting
  try {
    const ses = await fetch('/api/session', { credentials: 'same-origin' });
    const sesData = await ses.json();
    if (!sesData || !sesData.authenticated) {
      listingMessage.style.color = 'red';
      listingMessage.textContent = 'You must be logged in to submit a listing.';
      // open auth modal if available
      if (typeof openGuest === 'function') openGuest();
      return;
    }
    // only allow business or admin roles to submit
    if (!sesData.user || (sesData.user.role !== 'business' && sesData.user.role !== 'admin')) {
      listingMessage.style.color = 'red';
      listingMessage.textContent = 'Only Business accounts may submit listings.';
      return;
    }
  } catch (err) {
    listingMessage.style.color = 'red';
    listingMessage.textContent = 'Session check failed. Please try again.';
    return;
  }

  const formData = new FormData(listingForm);

  try {
    const response = await fetch("/submit-listing", {
      method: "POST",
      body: formData // send as multipart/form-data
    });

    const result = await response.json();

    if (response.ok) {
      listingMessage.style.color = "green";
      listingMessage.textContent = "Listing submitted! Waiting for admin approval.";
      listingForm.reset();
    } else {
      listingMessage.style.color = "red";
      listingMessage.textContent = result.error || "Failed to submit listing";
    }
  } catch (err) {
    listingMessage.style.color = "red";
    listingMessage.textContent = "Server error: " + err.message;
  }
});

</script>

<!-- JAVASCRIPT -->
<script src="/js/global.js"></script>
<script src="/js/home.js"></script>

<script>
  // Use the shared loader in /js/home.js so listings are rendered consistently and only once.
  // If fetchApprovedListings is not present (older page), fallback to a basic fetch/render.
  (function(){
    if (typeof fetchApprovedListings === 'function') {
      // Avoid calling immediately when the page will also trigger a DOMContentLoaded call.
      // If the document is already fully parsed, call now; otherwise let the DOMContentLoaded
      // handler (in /js/home.js) perform the load to prevent duplicate runs.
      if (document.readyState === 'complete') {
        fetchApprovedListings();
      }
      return;
    }

    // Fallback: lightweight render (should rarely run)
    (async function(){
      try {
        const res = await fetch('/api/approved-listings');
        const listings = await res.json();
        const container = document.getElementById('opportunitiesGrid');
        container.innerHTML = '';
        listings.forEach(item => {
          const card = document.createElement('article');
          card.className = 'card listing-card';
          const img = item.image_url ? `style="background-image:url('${item.image_url}')"` : '';
          card.innerHTML = `
            <div class="property-photo" ${img}></div>
            <div class="title">${item.title || 'Untitled'}</div>
            <div class="muted description">${item.description || ''}</div>
            <div class="listing-meta">
              <div class="listing-price">${item.price ? '‚Ç±' + item.price : 'Price on request'}</div>
              <div class="listing-stats muted">${item.size ? (item.size + ' sqm') : ''}</div>
            </div>
            <div class="listing-actions">
              <button class="btn btn-primary" onclick="openInquiry(${item.id}, '${(item.title||'Listing').replace(/'/g, "\\'")}')">Send Inquiry</button>
              <button class="btn btn-ghost" onclick="viewDetailsById(${item.id})">View Details</button>
            </div>
          `;
          container.appendChild(card);
        });
      } catch (e) {
        console.error('Fallback listings load failed', e);
      }
    })();
  })();
</script>

<!-- Location Picker Modal -->
<div id="locationPickerModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.5); z-index: 1000; align-items: center; justify-content: center;">
  <div style="background: white; border-radius: 12px; width: 90%; max-width: 800px; height: 90vh; display: flex; flex-direction: column; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3); position: relative;">
    <!-- Modal Header -->
    <div style="padding: 20px; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;">
      <h2 style="margin: 0; font-size: 1.3rem; color: #1f2937;">Select Location on Map</h2>
      <button id="closeLocationModal" type="button" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #6b7280; padding: 0; width: 30px; height: 30px; flex-shrink: 0;">‚úï</button>
    </div>

    <!-- Modal Map Container -->
    <div id="locationPickerMap" style="flex: 1; position: relative; width: 100%; min-height: 0;"></div>

    <!-- Modal Footer -->
    <div style="padding: 20px; border-top: 1px solid #e5e7eb; display: flex; gap: 12px; justify-content: flex-end; flex-shrink: 0;">
      <button id="cancelLocationBtn" type="button" class="btn btn-ghost" style="margin: 0;">Cancel</button>
      <button id="confirmLocationBtn" type="button" class="btn btn-primary" disabled style="margin: 0;">Confirm Location</button>
    </div>
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

</body>
</html>
